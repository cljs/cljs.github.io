<html><head><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1" name="viewport" /><title>cljs.build.api</title><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700" rel="stylesheet" /><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" /><link href="/css/normalize.css" rel="stylesheet" /><link href="/css/skeleton.css" rel="stylesheet" /><link href="/css/custom.css" rel="stylesheet" /><link href="/css/github-theme.css" rel="stylesheet" /><link href="/img/icons/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57" /><link href="/img/icons/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114" /><link href="/img/icons/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72" /><link href="/img/icons/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144" /><link href="/img/icons/apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60" /><link href="/img/icons/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" /><link href="/img/icons/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" /><link href="/img/icons/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" /><link href="/img/icons/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180" /><link href="/img/icons/favicon-192x192.png" rel="icon" sizes="192x192" type="image/png" /><link href="/img/icons/favicon-160x160.png" rel="icon" sizes="160x160" type="image/png" /><link href="/img/icons/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png" /><link href="/img/icons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" /><link href="/img/icons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" /></head><body><div class="container"><nav class="navbar"><div class="container"><ul class="navbar-list"><li class="navbar-item"><a class="navbar-link-logo"><img class="navbar-logo" src="/img/cljs-white.svg" /></a></li><li class="navbar-item"><a class="navbar-title">ClojureScript</a></li><li class="navbar-item"><a class="navbar-link" href="/api">API</a></li><li class="navbar-item"><a class="navbar-link" href="/news">News</a></li><li class="navbar-item"><a class="navbar-link" href="https://github.com/clojure/clojurescript" target="_blank">GitHub</a></li></ul></div></nav><div class="container"><div class="row"><div class="three columns" style="overflow-x: hidden"><div><a href="/api">< Back to Overview</a><div class="sep"></div><div class="sep"></div><div class="r"><span style="opacity: 0.3"></span><a href="#add-dependencies">add-dependencies</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#add-dependency-sources">add-dependency-sources</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#add-implicit-options">add-implicit-options</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#build">build</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#cljs-dependents-for-macro-namespaces">cljs-dependents-for-macro-namespaces</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#compilable-GTijs">compilable->ijs</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#compile">compile</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#compiler-optsQMARK">compiler-opts?</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#dependency-order">dependency-order</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#get-node-deps">get-node-deps</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#goog-dep-string">goog-dep-string</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#handle-js-modules">handle-js-modules</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#index-ijs">index-ijs</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#inputs">inputs</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#install-node-depsBANG">install-node-deps!</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#mark-cljs-ns-for-recompileBANG">mark-cljs-ns-for-recompile!</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#node-inputs">node-inputs</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#node-modules">node-modules</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#ns-GTlocation">ns->location</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#ns-GTsource">ns->source</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#output-unoptimized">output-unoptimized</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#parse-js-ns">parse-js-ns</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#source-on-disk">source-on-disk</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#src-file-GTgoog-require">src-file->goog-require</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#src-file-GTtarget-file">src-file->target-file</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#target-file-for-cljs-ns">target-file-for-cljs-ns</a></div><div class="r"><span style="opacity: 0.3"></span><a href="#watch">watch</a></div></div></div><div class="nine columns"><div><h2>cljs.build.api</h2><div>since v0.0-2496</div><div class="sep"></div><hr /><h4></h4><div style="position: relative;"><div class="r" id="add-dependencies"><strong>add-dependencies</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/add-dependencies">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(add-dependencies opts & ijss)</code></div></div><div class="sep"><pre>DEPRECATED: Given one or more IJavaScript objects in dependency order, produce
a new sequence of IJavaScript objects which includes the input list
plus all dependencies in dependency order.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="add-dependency-sources"><strong>add-dependency-sources</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/add-dependency-sources">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(add-dependency-sources xs)</code></div><div><code>(add-dependency-sources xs opts)</code></div><div><code>(add-dependency-sources state xs opts)</code></div></div><div class="sep"><pre>Given a sequence of cljs.closure/IJavaScript values, return a set that includes
all dependencies.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="add-implicit-options"><strong>add-implicit-options</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/add-implicit-options">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(add-implicit-options opts)</code></div></div><div class="sep"><pre>Given a valid map of build options add any standard implicit options. For
example :optimizations :none implies :cache-analysis true and :source-map
true.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="build"><strong>build</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/build">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(build opts)</code></div><div><code>(build source opts)</code></div><div><code>(build source opts compiler-env)</code></div></div><div class="sep"><pre>Given compiler options, produce runnable JavaScript. An optional source
parameter may be provided.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="cljs-dependents-for-macro-namespaces"><strong>cljs-dependents-for-macro-namespaces</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/cljs-dependents-for-macro-namespaces">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(cljs-dependents-for-macro-namespaces namespaces)</code></div><div><code>(cljs-dependents-for-macro-namespaces state namespaces)</code></div></div><div class="sep"><pre>Takes a list of Clojure (.clj) namespaces that define macros and
returns a list ClojureScript (.cljs) namespaces that depend on those macro
namespaces.

For example where example.macros is defined in the clojure file
"example/macros.clj" and both 'example.core and 'example.util are
ClojureScript namespaces that require and use the macros from
'example.macros :
(cljs-dependents-for-macro-namespaces 'example.macros) ->
('example.core 'example.util)</pre></div></div><hr /><div style="position: relative;"><div class="r" id="compilable-GTijs"><strong>compilable->ijs</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/compilable-GTijs">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(compilable->ijs x)</code></div><div><code>(compilable->ijs x opts)</code></div></div><div class="sep"><pre>Given a cljs.closure/Compilable value, return the corresponding
cljs.closure/IJavaScript value.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="compile"><strong>compile</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/compile">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(compile opts compilable)</code></div><div><code>(compile state opts compilable)</code></div></div><div class="sep"><pre>Given a Compilable, compile it and return an IJavaScript.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="compiler-optsQMARK"><strong>compiler-opts?</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/compiler-optsQMARK">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(compiler-opts? m)</code></div></div></div><hr /><div style="position: relative;"><div class="r" id="dependency-order"><strong>dependency-order</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/dependency-order">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(dependency-order xs)</code></div></div><div class="sep"><pre>Topologically sort a collection of IJavaScript values.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="get-node-deps"><strong>get-node-deps</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/get-node-deps">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(get-node-deps dependencies)</code></div><div><code>(get-node-deps dependencies opts)</code></div></div><div class="sep"><pre>EXPERIMENTAL: Get the Node.js dependency graph of the supplied dependencies.
Dependencies must be a sequence of strings or symbols naming packages or paths
within packages (e.g. [react "react-dom/server"] or a valid compiler options
map. Assumes dependencies have been been previously installed, either by
`cljs.build.api/install-node-deps!` or by an NPM client, and reside in the
`node_modules` directory.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="goog-dep-string"><strong>goog-dep-string</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/goog-dep-string">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(goog-dep-string opts ijs)</code></div></div><div class="sep"><pre>Given compiler options and a IJavaScript instance return the corresponding
goog.addDependency string</pre></div></div><hr /><div style="position: relative;"><div class="r" id="handle-js-modules"><strong>handle-js-modules</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/handle-js-modules">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(handle-js-modules state xs opts)</code></div></div><div class="sep"><pre>Given a collection of IJavaScript values representing a build, index all
node modules, convert all JS modules (ES6 etc), and store the updated
js-dependency-index (likely changed due to modules) in compiler state.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="index-ijs"><strong>index-ijs</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/index-ijs">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(index-ijs xs)</code></div></div><div class="sep"><pre>Given a sequence of cljs.closure/IJavaScript values, create an index using
:provides. The original values will appear under each :provide.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="inputs"><strong>inputs</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/inputs">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(inputs & xs)</code></div></div><div class="sep"><pre>Given a list of directories and files, return a compilable object that may
be passed to build or watch.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="install-node-depsBANG"><strong>install-node-deps!</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/install-node-depsBANG">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(install-node-deps! dependencies)</code></div><div><code>(install-node-deps! dependencies opts)</code></div></div><div class="sep"><pre>EXPERIMENTAL: Install the supplied dependencies via NPM. dependencies must be
a map of name to version or a valid compiler options map.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="mark-cljs-ns-for-recompileBANG"><strong>mark-cljs-ns-for-recompile!</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/mark-cljs-ns-for-recompileBANG">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(mark-cljs-ns-for-recompile! ns-sym)</code></div><div><code>(mark-cljs-ns-for-recompile! ns-sym output-dir)</code></div></div><div class="sep"><pre>Backdates a cljs target file so that it the cljs compiler will recompile it.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="node-inputs"><strong>node-inputs</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/node-inputs">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(node-inputs entries)</code></div><div><code>(node-inputs entries opts)</code></div></div><div class="sep"><pre>EXPERIMENTAL: return the foreign libs entries as computed by running
the module-deps package on the supplied JavaScript entry points. Assumes
that the `@cljs-oss/module-deps` NPM package is either locally or globally
installed.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="node-modules"><strong>node-modules</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/node-modules">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(node-modules opts)</code></div></div><div class="sep"><pre>Return a sequence of requirable libraries found under node_modules.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="ns-GTlocation"><strong>ns->location</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/ns-GTlocation">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(ns->location ns)</code></div><div><code>(ns->location ns compiler-env)</code></div></div><div class="sep"><pre>Given a namespace and compilation environment return the relative path and
uri of the corresponding source regardless of the source language extension:
.cljs, .cljc, .js. Returns a map containing :relative-path a string, and
:uri a URL.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="ns-GTsource"><strong>ns->source</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/ns-GTsource">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(ns->source ns)</code></div></div><div class="sep"><pre>Given a namespace as a symbol return the corresponding resource if it exists.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="output-unoptimized"><strong>output-unoptimized</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/output-unoptimized">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(output-unoptimized opts & sources)</code></div></div><div class="sep"><pre>Ensure that all JavaScript source files are on disk (not in jars),
write the goog deps file including only the libraries that are being
used and write the deps file for the current project.

The deps file for the current project will include third-party
libraries.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="parse-js-ns"><strong>parse-js-ns</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/parse-js-ns">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(parse-js-ns f)</code></div></div><div class="sep"><pre>Given a Google Closure style JavaScript file or resource return the namespace
information for the given file. Only returns the value extracted from the
first provide statement.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="source-on-disk"><strong>source-on-disk</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/source-on-disk">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(source-on-disk opts ijs)</code></div></div><div class="sep"><pre>Ensure that the given IJavaScript exists on disk in the output directory.
Return updated IJavaScript with the new location if necessary.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="src-file-GTgoog-require"><strong>src-file->goog-require</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/src-file-GTgoog-require">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(src-file->goog-require src)</code></div><div><code>(src-file->goog-require src opts)</code></div><div><code>(src-file->goog-require state src opts)</code></div></div><div class="sep"><pre>Given a ClojureScript or Google Closure style JavaScript source file return
the goog.require statement for it.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="src-file-GTtarget-file"><strong>src-file->target-file</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/src-file-GTtarget-file">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(src-file->target-file src)</code></div><div><code>(src-file->target-file src opts)</code></div><div><code>(src-file->target-file state src opts)</code></div></div><div class="sep"><pre>Given a ClojureScript source file return the target file. May optionally
provide build options with :output-dir specified.</pre></div></div><hr /><div style="position: relative;"><div class="r" id="target-file-for-cljs-ns"><strong>target-file-for-cljs-ns</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/target-file-for-cljs-ns">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(target-file-for-cljs-ns ns-sym)</code></div><div><code>(target-file-for-cljs-ns ns-sym output-dir)</code></div></div><div class="sep"><pre>Given an output directory and a clojurescript namespace return the
compilation target file for that namespace.

For example:
(target-file-from-cljs-ns "resources/out" 'example.core) ->
<File: "resources/out/example/core.js"></pre></div></div><hr /><div style="position: relative;"><div class="r" id="watch"><strong>watch</strong> - function</div><div style="position: absolute; right: 0; top: 0;"><a href="/api/cljs.build.api/watch">full details ></a></div><div class="sep"></div><div class="sep"><div><code>(watch source opts)</code></div><div><code>(watch source opts compiler-env)</code></div><div><code>(watch source opts compiler-env stop)</code></div></div><div class="sep"><pre>Given a source which can be compiled, watch it for changes to produce.</pre></div></div></div></div></div></div><footer class="site-footer"><div class="wrapper"><hr /><div class="cljs-legal">ClojureScript is licensed <a href="http://opensource.org/licenses/eclipse-1.0.php">EPL 1.0</a><br />Copyright Â© Rich Hickey</div></div></footer></div><script src="/js/client.js"></script></body></html>